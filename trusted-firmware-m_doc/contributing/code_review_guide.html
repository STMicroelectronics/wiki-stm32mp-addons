<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Code Review Guideline &mdash; Trusted Firmware-M v2.1.0-stm32mp-r1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/tfm_custom.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Maintainers" href="maintainers.html" />
    <link rel="prev" title="Contributing Process" href="contributing_process.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Trusted Firmware-M
              <img src="../_static/tf_logo_white.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                v2.1.0-stm32mp-r1

              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">Introduction</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../security/threat_models/generic_threat_model.html">Threat model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../security/security_advisories/index.html">Security Advisories</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../security/security_advisories/stack_seal_vulnerability.html">Advisory TFMV-1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security/security_advisories/svc_caller_sp_fetching_vulnerability.html">Advisory TFMV-2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security/security_advisories/crypto_multi_part_ops_abort_fail.html">Advisory TFMV-3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security/security_advisories/profile_small_key_id_encoding_vulnerability.html">Advisory TFMV-4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security/security_advisories/fwu_write_vulnerability.html">Advisory TFMV-5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security/security_advisories/cc3xx_partial_tag_compare_on_chacha20_poly1305.html">Advisory TFMV-6</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security/security_advisories/debug_log_vulnerability.html">Advisory TFMV-7</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Releases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../releases/2.1.0.html">v2.1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/2.0.0.html">v2.0.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/1.8.1.html">v1.8.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/1.8.0.html">v1.8.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/release_process.html">Release Cadence and Process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../platform/index.html">Platforms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../platform/arm/index.html">Arm</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platform/arm/corstone1000/readme.html">Corstone-1000</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/arm/mps3/corstone300/README.html">Corstone-300 FPGA (AN547 and AN552) and FVP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/arm/mps3/corstone310/README.html">Corstone-310 FPGA (AN555) and FVP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/arm/mps4/corstone315/README.html">Corstone-315 FVP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/arm/musca_b1/readme.html">Musca-B1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/arm/musca_s1/readme.html">Musca-S1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/arm/rse/index.html">Runtime Security Engine</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platform/armchina/index.html">ArmChina</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platform/armchina/mps3/alcor/README.html">Alcor FPGA (AN557)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platform/cypress/index.html">Cypress</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platform/cypress/psoc64/index.html">PSoC64</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platform/lairdconnectivity/index.html">Laird Connectivity</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platform/lairdconnectivity/bl5340_dvk_cpuapp/README.html">BL5340</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platform/nordic_nrf/index.html">Nordic</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platform/nordic_nrf/nrf5340dk_nrf5340_cpuapp/README.html">nRF5340</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/nordic_nrf/nrf9160dk_nrf9160/README.html">nRF9160</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/nordic_nrf/nrf9161dk_nrf9161/README.html">nRF9161</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platform/nuvoton/index.html">Nuvoton</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platform/nuvoton/m2351/README.html">NuMaker-PFM-M2351</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/nuvoton/m2354/README.html">NuMaker-PFM-M2354</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platform/nxp/index.html">NXP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platform/nxp/lpcxpresso55s69/README.html">LPCXpresso55S69</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platform/stm/index.html">STMICROELECTRONICS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/common/stm32h5xx/readme.html">STM32H5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/common/stm32l5xx/readme.html">STM32L5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/common/stm32mp2xx/readme.html">STM32MP2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/common/stm32u5xx/readme.html">STM32U5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/nucleo_l552ze_q/readme.html">NUCLEO_L552ZE_Q</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/stm32h573i_dk/readme.html">STM32H573I_DK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/stm32l562e_dk/readme.html">STM32L562E_DK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/stm32mp215f_dk/readme.html">stm32mp215f_dk</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/stm32mp257f_ev1/readme.html">stm32mp257f_ev1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/b_u585i_iot02a/readme.html">B_U585I_IOT02A</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../building/tfm_build_instruction.html">Build instructions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../building/tests_build_instruction.html">Build Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building/run_tfm_examples_on_arm_platforms.html">Run TF-M tests and applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building/documentation_generation.html">Building the documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building/tfm_build_instruction_iar.html">IAR toolchain</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../configuration/build_configuration.html">Build configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/header_file_system.html">Component configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/kconfig_system.html">Kconfig</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/profiles/index.html">Profiles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../configuration/profiles/tfm_profile_small.html"> Small</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/profiles/tfm_profile_medium_arot-less.html"> ARoT-less</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/profiles/tfm_profile_medium.html"> Medium</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/profiles/tfm_profile_large.html"> Large</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/test_configuration.html">Tests configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../integration_guide/index.html">Integration Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../integration_guide/source_structure/source_structure.html">Source Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../integration_guide/source_structure/platform_folder.html">Details for the /platform folder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../integration_guide/source_structure/platform_ext_folder.html">Details for the /platform/ext folder</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../integration_guide/spm_backends.html">SPM Backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration_guide/non-secure_client_extension_integration_guide.html">NS client integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration_guide/os_migration_guide_armv8m.html">OS migration to Armv8-M</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration_guide/tfm_fpu_support.html">Floating-Point Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration_guide/tfm_secure_irq_integration_guide.html">Secure Interrupt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration_guide/platform_provisioning.html">Platform Provisioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration_guide/platform/index.html">Adding a new platform</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../integration_guide/platform/porting_tfm_to_a_new_hardware.html">Porting TF-M to a New Hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../integration_guide/platform/documenting_platform.html">Platform Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../integration_guide/platform/platform_deprecation.html">Platform deprecation and removal</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../integration_guide/services/index.html">Services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../integration_guide/services/tfm_attestation_integration_guide.html">Initial Attestation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../integration_guide/services/tfm_crypto_integration_guide.html">Crypto</a></li>
<li class="toctree-l3"><a class="reference internal" href="../integration_guide/services/tfm_its_integration_guide.html">Internal Trusted Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../integration_guide/services/tfm_platform_integration_guide.html">Platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="../integration_guide/services/tfm_ps_integration_guide.html">Protected Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../integration_guide/services/tfm_secure_partition_addition.html">Adding a New Secure Partition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../integration_guide/services/tfm_manifest_tool_user_guide.html">Manifest Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../integration_guide/services/tfm_adac_integration_guide.html">ADAC</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../design_docs/index.html">Design Documents</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../design_docs/booting/tfm_secure_boot.html">Secure Boot</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/booting/bl1.html">BL1 Immutable bootloader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/booting/secure_boot_rollback_protection.html">Rollback Protection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/booting/secure_boot_hw_key_integration.html">HW Key integration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../design_docs/dual-cpu/index.html">Dual CPU</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/dual-cpu/booting_a_dual_core_system.html">Booting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/dual-cpu/communication_prototype_between_nspe_and_spe_in_dual_core_systems.html">SPE - NSPE communication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/dual-cpu/mailbox_design_on_dual_core_system.html">Mailbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/dual-cpu/mailbox_ns_agent_update.html">Mailbox update</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/dual-cpu/tfm_multi_core_access_check.html">Memory Access Check</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../design_docs/services/index.html">Secure Services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/services/secure_partition_manager.html">Secure Partition Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/services/secure_partition_runtime_library.html">Secure Partition RTL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/services/tfm_psa_inter_process_communication.html">Inter-Process Communication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/services/stateless_rot_service.html">Stateless Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/services/tfm_uniform_secure_service_signature.html">Service Signing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/services/tfm_crypto_design.html">Crypto</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/services/symmetric_initial_attest.html">Initial Attestation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/services/tfm_its_service.html">Internal Trusted Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/services/tfm_fwu_service.html">Firmware Update</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/services/ps_key_management.html">PS Key Management</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../design_docs/software/index.html">Software Design</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/software/code_sharing.html">Code Sharing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/software/hardware_abstraction_layer.html">Hardware Abstraction Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/software/tfm_cooperative_scheduling_rules.html">Cooperative Scheduling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/software/tfm_code_generation_with_jinja2.html">Code Templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../design_docs/software/enum_implicit_casting.html">Implicit Typecasting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../design_docs/ff_isolation.html">Isolation Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design_docs/tfm_builtin_keys.html">Builtin Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design_docs/tfm_log_system_design_document.html">Logging system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design_docs/tfm_physical_attack_mitigation.html">Physical Attack Mitigation</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contribution</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Guidelines</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="contributing_process.html">The process</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Code review</a></li>
<li class="toctree-l2"><a class="reference internal" href="maintainers.html">Maintainers</a></li>
<li class="toctree-l2"><a class="reference internal" href="maintainers.html#code-owners">Code owners</a></li>
<li class="toctree-l2"><a class="reference internal" href="coding_guide.html">Yet another coding standard :)</a></li>
<li class="toctree-l2"><a class="reference internal" href="doc_guidelines.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tfm_design_proposal_guideline.html">Design proposal</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="lic.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="dco.html">DCO</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://trustedfirmware-m.readthedocs.io/projects/tf-m-tests/en/latest/">TF-M Tests</a></li>
<li class="toctree-l1"><a class="reference external" href="https://trustedfirmware-m.readthedocs.io/projects/tf-m-tools/en/latest/">TF-M Tools</a></li>
<li class="toctree-l1"><a class="reference external" href="https://trustedfirmware-m.readthedocs.io/projects/tf-m-extras/en/latest/">TF-M Extras</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ci.trustedfirmware.org/job/tf-m-build-docs-nightly/lastSuccessfulBuild/artifact/trusted-firmware-m/build/docs/reference_manual/html/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference external" href="https://developer.trustedfirmware.org/w/collaboration/security_center">Security Center</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.arm.com/architecture/security-features/platform-security">PSA</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">STMICROELECTRONICS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../stm/releases/index.html">Releases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../stm/releases/getting_started.html">Getting started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/stm32h573i_dk/readme.html">STM32H573I_DK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/stm32l562e_dk/readme.html">STM32L562E_DK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/stm32mp215f_dk/readme.html">stm32mp215f_dk</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/stm32mp257f_ev1/readme.html">stm32mp257f_ev1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/nucleo_l552ze_q/readme.html">NUCLEO_L552ZE_Q</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/b_u585i_iot02a/readme.html">B_U585I_IOT02A</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../stm/releases/platforms.html">Platforms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/common/stm32h5xx/readme.html">STM32H5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/common/stm32l5xx/readme.html">STM32L5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/common/stm32mp2xx/readme.html">STM32MP2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/common/stm32u5xx/readme.html">STM32U5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/nucleo_l552ze_q/readme.html">NUCLEO_L552ZE_Q</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/stm32h573i_dk/readme.html">STM32H573I_DK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/stm32l562e_dk/readme.html">STM32L562E_DK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/stm32mp215f_dk/readme.html">stm32mp215f_dk</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/stm/stm32mp257f_ev1/readme.html">stm32mp257f_ev1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../stm/releases/changelog.html">Change Log &amp; Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../stm/releases/v1.7.0/index.html">v1.7.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stm/releases/v2.1.0/index.html">v2.1.0</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../stm/releases/index.html#branch-plans">Branch plans</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stm/technical/index.html">Technical references</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../stm/technical/a35_td_flavor/index.html">A35-TD flavor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../stm/technical/a35_td_flavor/memory_layout.html">Memory layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stm/technical/a35_td_flavor/storage.html">Storage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../stm/technical/m33_td_flavor/index.html">M33-TD flavor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../stm/technical/m33_td_flavor/memory_layout.html">Memory layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stm/technical/m33_td_flavor/storage.html">Storage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../stm/technical/devicetree/index.html">Devicetree</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../stm/technical/devicetree/devicetree_tfm.html">Scope and purpose</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stm/technical/devicetree/devicetree_tfm.html#concept">Concept</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stm/technical/devicetree/devicetree_tfm.html#how-to-add-device">How to add device</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../stm/technical/initlevel.html">Initlevel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stm/technical/initial_attestation.html">Initial Attestation Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stm/technical/nv_counter.html">Nv counter</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../stm/ide/index.html">Ide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../stm/ide/cube/stm32cubeide.html">STM32CubeIDE</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Trusted Firmware-M</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Contribution Guidelines</a></li>
      <li class="breadcrumb-item active">Code Review Guideline</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="code-review-guideline">
<h1>Code Review Guideline<a class="headerlink" href="#code-review-guideline" title="Permalink to this heading"></a></h1>
<p>The purpose of this document is to clarify design items to be reviewed during
the code review process.</p>
<p>Please contact <a class="reference internal" href="maintainers.html"><span class="doc">maintainers</span></a> or write an e-mail
thread on the <a class="reference external" href="mailto:tf-m&#37;&#52;&#48;lists&#46;trustedfirmware&#46;org">TF-M mailing list</a> for
any questions.</p>
<div class="section" id="list-of-the-guidelines">
<h2>List of the guidelines<a class="headerlink" href="#list-of-the-guidelines" title="Permalink to this heading"></a></h2>
<p>The prerequisites before going to the review stage:</p>
<ul class="simple">
<li><p>Read the <a class="reference internal" href="contributing_process.html"><span class="doc">Contributing Process</span></a>
to know basic concepts.</p></li>
<li><p>Read the <a class="reference internal" href="../integration_guide/source_structure/source_structure.html#source-structure"><span class="std std-ref">Source Structure</span></a>
for structure related reference.</p></li>
</ul>
<p>The review guidelines consist of these items:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#exceptions">Exceptions</a>.</p></li>
<li><p><a class="reference internal" href="#non-source-items">Non-source items</a>.</p></li>
<li><p><a class="reference internal" href="#namespace">Namespace</a>.</p></li>
<li><p><a class="reference internal" href="#assembler-code">Assembler code</a>.</p></li>
<li><p><a class="reference internal" href="#include">Include</a>.</p></li>
<li><p><a class="reference internal" href="#auto-doc">Auto-doc</a>.</p></li>
<li><p><a class="reference internal" href="#commit-message">Commit Message</a>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Each guideline item is assigned with a unique symbol in the format <code class="docutils literal notranslate"><span class="pre">Rx.y</span></code>,
while <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> are numeric symbols. These symbols are created for easy
referencing during the code review process.</p>
</div>
<div class="section" id="exceptions">
<h3>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this heading"></a></h3>
<p>Files under listed folders are fully or partially imported from 3rd party
projects, these files follow the original project defined guidelines and
styles:</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul class="simple">
<li><p>R1.1 <code class="docutils literal notranslate"><span class="pre">ext</span></code> and its subfolders.</p></li>
</ul>
</div>
</div>
<div class="section" id="non-source-items">
<h3>Non-source items<a class="headerlink" href="#non-source-items" title="Permalink to this heading"></a></h3>
<p>For all non-source files such as build system files or configuration files:</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul class="simple">
<li><p>R2.1 Follow the existing style while making changes.</p></li>
</ul>
</div>
</div>
<div class="section" id="namespace">
<h3>Namespace<a class="headerlink" href="#namespace" title="Permalink to this heading"></a></h3>
<p>TF-M assign the namespace to files and symbols for an easier code reading. The
symbol here includes functions, variables, types and MACROs. The prerequisites:</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul class="simple">
<li><p>R3.1 Follow the documents or specifications if they propose namespaces
(‘psa_’ for PSA defined items E.g.,). Ask the contributor to tell the
documents or specifications if the reviewer is not sure about a namespace.</p></li>
<li><p>R3.2 Assign TF-M specific namespace ‘tfm_’ or ‘TFM_’ for symbols
implementing TF-M specific features. Ask the contributor to clarify the
purpose of the patch if the reviewer is not sure about the namespace.</p></li>
</ul>
</div>
<p>For the sources out of the above prerequisites (R3.1 and R3.2):</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul class="simple">
<li><p>R3.3 Do not assign a namespace for source files.</p></li>
<li><p>R3.4 Assigning a namespace for interface symbols is recommended. The
namespace needs to be expressed in one word to be followed by other words
into a phrase can represent the functionalities implemented. One word
naming is allowed if the namespace can represent the functionality
perfectly.</p></li>
<li><p>R3.5 Assign a namespace for private symbols is NOT recommended.</p></li>
<li><p>R3.6 Do not assign characters out of alphabets as the leading character.</p></li>
</ul>
</div>
<p>Examples:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* R3.1 FILE: s/spm/core/psa_client.c */</span>

<span class="cm">/* R3.2 FILE: s/spm/core/tfm_secure_context.c */</span>

<span class="cm">/* R3.4 FILE: s/spm/core/spm.c, &#39;spm\_&#39; as the namespace */</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">spm_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cm">/* R3.5 FILE: s/spm/core/main.c */</span>
<span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">init_functions</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cm">/* R3.6 Not permitted: */</span>
<span class="cm">/* static uint32_t __count; */</span>
</pre></div>
</div>
</div>
<div class="section" id="assembler-code">
<h3>Assembler code<a class="headerlink" href="#assembler-code" title="Permalink to this heading"></a></h3>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul class="simple">
<li><p>R4.1 Pure assembler sources or inline assembler code are required to be put
under the platform-independent or architecture-independent folders.
The logic folders should not contain any assembler code, referring to
external MACRO wrapped assembler code is allowed. Here is one example of the
logic folder:</p>
<ul>
<li><p>‘secure_fw/spm’.</p></li>
</ul>
</li>
</ul>
</div>
<p>Examples:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> * R4.1 The following MACRO is allowed to be referenced under</span>
<span class="cm"> * &#39;secure_fw/spm&#39;</span>
<span class="cm"> */</span>
<span class="cp">#define SVC(code) __asm volatile(&quot;svc  %0&quot;, ::&quot;I&quot;(code))</span>
</pre></div>
</div>
</div>
<div class="section" id="include">
<h3>Include<a class="headerlink" href="#include" title="Permalink to this heading"></a></h3>
<p>This chapter describes the placement of the headers and including. There are
two types of headers: The <code class="docutils literal notranslate"><span class="pre">interface</span></code> headers contain symbols to be shared
between modules and the <code class="docutils literal notranslate"><span class="pre">private</span></code> headers contain symbols only for internal
usage.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul class="simple">
<li><p>R5.1 Put the <code class="docutils literal notranslate"><span class="pre">interface</span> <span class="pre">header</span></code> of one module in the <code class="docutils literal notranslate"><span class="pre">include</span></code> folder
under the root of this module. Deeper sub-folders can not have <code class="docutils literal notranslate"><span class="pre">include</span></code>
folders, which means only one <code class="docutils literal notranslate"><span class="pre">include</span></code> is allowed for one module.</p></li>
<li><p>R5.2 Creating sub-folders under <code class="docutils literal notranslate"><span class="pre">include</span></code> to represent the more granular
scope of the interfaces is allowed.</p></li>
<li><p>R5.3 <code class="docutils literal notranslate"><span class="pre">private</span> <span class="pre">header</span></code> can be put at the same place with the implementation
sources for the private symbols contained in the header. It also can be put
at the place where the sources need it. The latter is useful when some
“private header” contains abstracted interfaces, but these interfaces are
not public interfaces so it won’t be put under “include” folder.</p></li>
<li><p>R5.4 Use &lt;&gt; when including public headers.</p></li>
<li><p>R5.5 Use “” when including private headers.</p></li>
<li><p>R5.6 The module’s <code class="docutils literal notranslate"><span class="pre">include</span></code> folder needs to be added into referencing
module’s header searching path.</p></li>
<li><p>R5.7 The module’s <code class="docutils literal notranslate"><span class="pre">include</span></code> folder and the root folder needs to be added
into its own header searching path and apply a hierarchy including with
folder name.</p></li>
<li><p>R5.8 Path hierarchy including is allowed since there are sub-folders under
<code class="docutils literal notranslate"><span class="pre">include</span></code> folder and the module folder.</p></li>
<li><p>R5.9 The including statement group order: the beginning group contains
toolchain headers, then follows the public headers group and finally the
private headers group.</p></li>
<li><p>R5.10 The including statement order inside a group: Compare the include
statement as strings and sort by the string comparison result.</p></li>
<li><p>R5.11 The header for the referenced symbol or definition must be included
even this header is included inside one of the existing included headers.
This improves portability in case the existing header implementation
changed.</p></li>
</ul>
</div>
<p>Examples:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> * The structure:</span>
<span class="cm"> *   module_a/include/func1.h</span>
<span class="cm"> *   module_a/include/func2/fmain.h</span>
<span class="cm"> *   module_a/func1.c</span>
<span class="cm"> *   module_a/func2/fmain.c</span>
<span class="cm"> *   module_b/include/funcx.h</span>
<span class="cm"> *   module_b/include/funcy/fmain.h</span>
<span class="cm"> *   module_b/funcx.c</span>
<span class="cm"> *   module_b/funcxi.h</span>
<span class="cm"> *   module_b/funcy/fmain.c</span>
<span class="cm"> *   module_b/funcy/fsub.c</span>
<span class="cm"> *   module_b/funcy/fsub.h</span>
<span class="cm"> * Here takes module_b/funcx.c as example:</span>
<span class="cm"> */</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;func1.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;func2/fmain.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;funcx.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;funcxi.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;funcy/fsub.h&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="auto-doc">
<h3>Auto-doc<a class="headerlink" href="#auto-doc" title="Permalink to this heading"></a></h3>
<p>Auto document system such as doxygen is useful for describing interfaces. While
it would be a development burden since the details are described in the design
documents already. The guidelines for auto-doc:</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul class="simple">
<li><p>R6.1 Headers and sources under these folders need to apply auto-doc style
comments: <code class="docutils literal notranslate"><span class="pre">*include</span></code>.</p></li>
<li><p>R6.2 Developers decide the comment style for sources out of listed folders.</p></li>
</ul>
</div>
</div>
<div class="section" id="commit-message">
<h3>Commit Message<a class="headerlink" href="#commit-message" title="Permalink to this heading"></a></h3>
<p>TF-M has the requirements on commit message:</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul class="simple">
<li><p>R7.1 Assign correct topic for a patch. Check the following table.</p></li>
</ul>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 79%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Topic</p></th>
<th class="head"><p>Justification</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Boot</p></td>
<td><p><cite>bl2/*</cite> or <cite>bl1/*</cite></p></td>
</tr>
<tr class="row-odd"><td><p>Build</p></td>
<td><p>For build system related purpose.</p></td>
</tr>
<tr class="row-even"><td><p>Docs</p></td>
<td><p>All *.rst changes.</p></td>
</tr>
<tr class="row-odd"><td><p>Dualcpu</p></td>
<td><p>Dual-cpu related changes.</p></td>
</tr>
<tr class="row-even"><td><p>HAL</p></td>
<td><p>Generic HAL interface/implementation changes.</p></td>
</tr>
<tr class="row-odd"><td><p>Interface</p></td>
<td><p>Interface changes, either Non-source and secure.</p></td>
</tr>
<tr class="row-even"><td><p>Pack</p></td>
<td><p>For packing purpose.</p></td>
</tr>
<tr class="row-odd"><td><p>Platform</p></td>
<td><p>Generic platform related changes under <cite>platform/*</cite>.</p></td>
</tr>
<tr class="row-even"><td><p>Platform Name</p></td>
<td><p>Specific platform changes.</p></td>
</tr>
<tr class="row-odd"><td><p>Partition</p></td>
<td><p>Multiple partition related changes.</p></td>
</tr>
<tr class="row-even"><td><p>Partition Name</p></td>
<td><p>Specific partition related changes.</p></td>
</tr>
<tr class="row-odd"><td><p>Service</p></td>
<td><p>Multiple service related changes.</p></td>
</tr>
<tr class="row-even"><td><p>Service Name</p></td>
<td><p>Specific service related changes.</p></td>
</tr>
<tr class="row-odd"><td><p>SPM</p></td>
<td><p><cite>secure_fw/spm/*</cite></p></td>
</tr>
<tr class="row-even"><td><p>SPRTL</p></td>
<td><p><cite>secure-fw/partitions/lib/runtime/*</cite></p></td>
</tr>
<tr class="row-odd"><td><p>Tool</p></td>
<td><p><cite>tools</cite> folder or <cite>tf-m-tools</cite> repo</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ideally, one topic should cover one specific type of changes. For crossing
topic changes, check the main part of the change and use the main part
related topic as patch topic. If there is no suitable topics to cover the
change, contact the community for an update.</p>
</div>
<hr class="docutils" />
<p><em>Copyright (c) 2020-2022, Arm Limited. All rights reserved.</em></p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>